!function(t){"object"==typeof exports?module.exports=t(colorConfig):"function"==typeof define&&define.amd?define(["colorConfig"],t):t(colorConfig)}(function(t){var a=t||{},i=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsva?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,e=function(t,a){if("function"!=typeof a)throw new TypeError;for(var i=t?t.length:0,e=0;e<i;e++)t[e]=a(t[e]);return t},r=function(t,a){return Math.max(a[0],Math.min(t,a[1]))},n=function(t){var a,i,e,r=t[0]/360,n=t[1],h=t[2];if(0===n)a=255*h,i=255*h,e=255*h;else{var s=6*r;6===s&&(s=0);var o=Math.floor(s),p=h*(1-n),u=h*(1-n*(s-o)),f=h*(1-n*(1-(s-o))),d=0,l=0,c=0;0===o?(d=h,l=f,c=p):1===o?(d=u,l=h,c=p):2===o?(d=p,l=h,c=f):3===o?(d=p,l=u,c=h):4===o?(d=f,l=p,c=h):(d=h,l=p,c=u),a=255*d,i=255*l,e=255*c}return[a,i,e]},h=function(t,a,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+6*(a-t)*i:2*i<1?a:3*i<2?t+(a-t)*(2/3-i)*6:t},s=function(t){var a,i,e,r=t[0]/360,n=t[1],s=t[2];if(0===n)a=255*s,i=255*s,e=255*s;else{var o;o=s<.5?s*(1+n):s+n-n*s;var p=2*s-o;a=255*h(p,o,r+1/3),i=255*h(p,o,r),e=255*h(p,o,r-1/3)}return[a,i,e]},o=function(t){var a,i,e=t[0]/255,r=t[1]/255,n=t[2]/255,h=Math.min(e,r,n),s=Math.max(e,r,n),o=s-h,p=s;if(0===o)a=0,i=0;else{i=o/s;var u=((s-e)/6+o/2)/o,f=((s-r)/6+o/2)/o,d=((s-n)/6+o/2)/o;e===s?a=d-f:r===s?a=1/3+u-d:n===s&&(a=2/3+f-u),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,i=i,p=p,[a,i,p]},p=function(t){var a,i,e=t[0]/255,r=t[1]/255,n=t[2]/255,h=Math.min(e,r,n),s=Math.max(e,r,n),o=s-h,p=(s+h)/2;if(0===o)a=0,i=0;else{i=p<.5?o/(s+h):o/(2-s-h);var u=((s-e)/6+o/2)/o,f=((s-r)/6+o/2)/o,d=((s-n)/6+o/2)/o;e===s?a=d-f:r===s?a=1/3+u-d:n===s&&(a=2/3+f-u),a<0&&(a+=1),a>1&&(a-=1)}return a*=360,i=i,p=p,[a,i,p]},u=u||{};return u=function(t){return this instanceof u?void(t&&this.init(t)):new u(t)},u.prototype.constructor=u,u.prototype.__trim=function(t){return t=String(t),t=t.replace(/(^\s*)|(\s*$)/g,""),/^[^#]*?$/i.test(t)&&(t=t.replace(/\s/g,"")),t},u.prototype.__normalize=function(t){var i=a[t];if(void 0===i?(t=this.__trim(t),t=t.replace(/hsb/i,"hsv")):t=i,/^#[0-9a-f]{3}$/i.test(t)){var e=t.replace("#","").split("");t="#"+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}return t},u.prototype.init=function(t){var a,n,h;if(h=this.__normalize(t),h=h.match(i),null===h)throw new Error("color format error");if(this.data=[],this.valpha=1,h[2])this.type="rgb",a=h[2].replace("#","").split(""),n=[a[0]+a[1],a[2]+a[3],a[4]+a[5]],this.data=e(n,function(t){return r(parseInt(t,16),[0,255])});else if(h[4]){this.type="rgb";var s=h[4].split(","),o=s[3];n=s.slice(0,3),this.data=e(n,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),r(t,[0,255])}),"undefined"!=typeof o&&(this.type+="a",this.valpha=r(parseFloat(o),[0,1]))}else if(h[5]||h[6]){h[5]?this.type="hsv":this.type="hsl";var p=(h[5]||h[6]).split(","),u=r(parseInt(p[0],10),[0,360]),f=p[1],d=p[2],o=p[3];this.data=e([f,d],function(t){return t=t.indexOf("%")>0?.01*parseInt(t,0):t,r(parseFloat(t),[0,1])}),this.data.unshift(u),"undefined"!=typeof o&&(this.type+="a",this.valpha=r(parseFloat(o),[0,1]))}return this},u.prototype.update=u.prototype.init,u.prototype.alpha=function(t){return t?(this.valpha=r(Number(t).toFixed(4),[0,1]),this):this.valpha},u.prototype.change=function(t,a){var i,e="hex"==(t||"hex")?"rgb":t.replace("a","");return this.type.indexOf(e)>-1?i=[this.data[0],this.data[1],this.data[2]]:(e.indexOf("rgb")>-1&&((this.type.indexOf("hsv")>-1||this.type.indexOf("hsb")>-1)&&(i=n(this.data)),this.type.indexOf("hsl")>-1&&(i=s(this.data))),(e.indexOf("hsv")>-1||e.indexOf("hsb")>-1)&&(this.type.indexOf("rgb")>-1&&(i=o(this.data)),this.type.indexOf("hsl")>-1&&(i=o(s(this.data)))),e.indexOf("hsl")>-1&&(this.type.indexOf("rgb")>-1&&(i=p(this.data)),this.type.indexOf("hsv")>-1&&(i=p(s(this.data))))),a&&(this.data=i,this.type=e),i},u.prototype.toString=function(t){var t=t||"hex",a=this.change(t);if(a&&3===a.length){if(t.indexOf("hs")>-1){a[0]=parseInt(r(Number(a[0]).toFixed(4),[0,255]),10);var i=e(a.slice(1,3),function(t){return parseInt(r(Number(100*t).toFixed(4),[0,100]),10)+"%"});a[1]=i[0],a[2]=i[1]}else if(t.indexOf("rgb")>-1)a=e(a,function(t){return t>0?Math.round(t):0});else if(t.indexOf("hex")>-1)return a=e(a,function(t){return t>0?Math.round(t):0}),a=e(a.slice(0,3),function(t){return t=Number(t).toString(16),1===t.length?"0"+t:t}),"#"+a.join("");return t.indexOf("a")>-1?(this.valpha?this.valpha=r(this.valpha,[0,1]):this.valpha=1,t+"("+a.slice(0,3).join(",")+","+this.valpha+")"):t+"("+a.slice(0,3).join(",")+")"}},u.prototype.random=function(){return this.type="rgba",this.valpha=this.valpha||1,this.data=[Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random())],this},u.prototype.fade=function(t){return this.alpha(this.valpha-this.valpha*t)},u.prototype.opaquer=function(t){return this.alpha(this.valpha+this.valpha*t)},u.prototype.rotate=function(t){var a=this.type;return this.change("hsv",!0),this.data[0]=r(t,[0,360]),this.change(a,!0),this},u.prototype.luminosity=function(t){var a=this.type;return this.change("hsv",!0),this.data[1]+=this.data[1]*t,this.change(a,!0),this},u.prototype.lighten=function(t){return this.luminosity(t)},u.prototype.darken=function(t){return this.luminosity(-t)},u.prototype.saturation=function(t){var a=this.type;return this.change("hsv",!0),this.data[2]+=this.data[2]*t,this.change(a,!0),this},u.prototype.saturate=function(t){return this.saturation(t)},u.prototype.desaturate=function(t){return this.saturation(-t)},u.prototype.grayscale=function(){var t=this.type;return this.change("rgb",!0),this.data[0]*=.3,this.data[1]*=.59,this.data[2]*=.11,this.change(t,!0),this},u.prototype.reverse=function(){var t=this.type;return this.change("rgb",!0),this.data=e(this.data,function(t){return 255-t}),this.change(t,!0),this},u.prototype.lift=function(t){var a=this.type,i=t>0?1:-1;"undefined"==typeof t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),this.data=this.change("rgb",!0);for(var e=0;e<3;e++)1===i?this.data[e]=Math.floor(this.data[e]*(1-t)):this.data[e]=Math.floor((255-this.data[e])*t+this.data[e]);return this.data=this.change(a,!0),this},u.prototype.mix=function(t,a){var i=this.type;this.change("rgb",!0);var e=t.change("rgb");"undefined"==typeof a&&(a=.5),a=1-r(a,[0,1]);for(var n=2*a-1,h=this.valpha-t.valpha,s=((n*h===-1?n:(n+h)/(1+n*h))+1)/2,o=1-s,p=0;p<3;p++)this.data[p]=this.data[p]*s+e[p]*o;return this.change(i,!0),this.valpha=this.valpha*a+t.valpha*(1-a),this.valpha=r(this.valpha,[0,1]),this},u});